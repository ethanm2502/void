;// bundle: page___59218d4e561bff1dec47637052078194_m
;// files: Game/Index.js, VotingPanel.js, Leaderboards/Leaderboard.js, PlaceProductPromotion.js, GamePass.js, ItemPurchaseForDialog.js, jquery.history.js, utilities/robloxTabs.js, utilities/dialog.js, Games/GameDetailReferral.js, Game/GameDetailsInteractionEvents.js, PrivateServers/LinkJoin.js, utilities/robloxAds.js, Game/SignupWallPlayButton.js, widgets/Favorites.js, NumberFormatting.js, PrivateServers/PrivateServer.js, StringTruncator.js, GameItemCard.js, Comments.js, GameInstances/GameInstance.js, GenericModal.js, utilities/popover.js, GenericConfirmation.js

;// Game/Index.js
$(function(){var n=$("#badges-see-more");n.click(function(){n.text()=="See More"?n.text("See Less"):n.text("See More"),$(".badge-see-more-row").toggle()}),$(".game-play-buttons").data("autoplay")==!0&&$("#MultiplayerVisitButton").trigger("click")});

;// VotingPanel.js
var Roblox=Roblox||{};Roblox.Voting=function(){var f=function(){$(".users-vote .upvote").unbind().click(function(){i($(this),!0)}),$(".users-vote .downvote").unbind().click(function(){i($(this),!1)});var t=parseInt($(".voting-panel").data("total-up-votes")),r=parseInt($(".voting-panel").data("total-down-votes"));n(t,r)},i=function(n,i){var f=$(".voting-panel").attr("data-user-authenticated"),r;if(f.toLowerCase()=="false"){u("GuestUser");return}r=$(".voting-panel").data("asset-id"),n.hasClass("selected")||n.find("i").hasClass("selected")||n.find(".icon-like, .icon-dislike").hasClass("selected")?t(r,null):t(r,i)},t=function(n,t){$(".voting-panel .loading").show(),$.ajax({type:"POST",url:"/voting/vote?assetId="+n+"&vote="+t,success:e,error:o})},e=function(t){var o=$(".icon-like").length;if($(".voting-panel .loading").hide(),t.Success){r(t.Model.UpVotes,t.Model.DownVotes);var i=$(".voting-panel .upvote"),f=$(".voting-panel .downvote"),e=$(".users-vote");o&&(i=$(".voting-panel .upvote .icon-like"),f=$(".voting-panel .downvote .icon-dislike")),t.Model.UserVote!==null?e.hasClass("has-voted")||e.addClass("has-voted"):e.removeClass("has-voted"),i.hasClass("selected")&&i.removeClass("selected"),f.hasClass("selected")&&f.removeClass("selected"),t.Model.UserVote!==null&&(t.Model.UserVote?i.addClass("selected"):f.addClass("selected")),n(t.Model.UpVotes,t.Model.DownVotes)}else u(t.ModalType)},o=function(){$(".voting-panel .loading").hide()},n=function(n,t,i){var e=i||$("#voting-section"),r,u,f;isNaN(n)||isNaN(t)||(r=n===0?0:t===0?100:Math.floor(n/(n+t)*100),r>100&&(r=100),u=e.find(".vote-container"),f=u.find(".vote-background"),u.find(".vote-percentage").css("width",r+"%"),t>0?f.addClass("has-votes"):f.removeClass("has-votes"))},r=function(t,i){t=Roblox.NumberFormatting.abbreviatedFormat(t),i=Roblox.NumberFormatting.abbreviatedFormat(i),$(".voting-panel .total-upvotes-text").text(t),$(".voting-panel .total-downvotes-text").text(i),$(".voting-panel #vote-up-text").text(t),$(".voting-panel #vote-down-text").text(i),n(t,i)},u=function(n){if(n!==undefined&&n.length>0)switch(n){case"EmailIsVerified":Roblox.GenericConfirmation.open({titleText:Roblox.Voting.Resources.emailVerifiedTitle,bodyContent:Roblox.Voting.Resources.emailVerifiedMessage,onAccept:function(){window.location.href=Roblox&&Roblox.Endpoints?Roblox.Endpoints.getAbsoluteUrl("/my/account?confirmemail=1"):"/my/account?confirmemail=1"},acceptColor:Roblox.GenericConfirmation.blue,acceptText:Roblox.Voting.Resources.verify,declineText:Roblox.Voting.Resources.cancel,allowHtmlContentInBody:!0});return;case"PlayGame":Roblox.GenericModal.open(Roblox.Voting.Resources.playGameTitle,null,Roblox.Voting.Resources.playGameMessage);return;case"UseModel":Roblox.GenericModal.open(Roblox.Voting.Resources.useModelTitle,null,Roblox.Voting.Resources.useModelMessage);return;case"InstallPlugin":Roblox.GenericModal.open(Roblox.Voting.Resources.installPluginTitle,null,Roblox.Voting.Resources.installPluginMessage);return;case"BuyGamePass":Roblox.GenericModal.open(Roblox.Voting.Resources.buyGamePassTitle,null,Roblox.Voting.Resources.buyGamePassMessage);return;case"FloodCheckThresholdMet":Roblox.GenericModal.open(Roblox.Voting.Resources.floodCheckThresholdMetTitle,null,Roblox.Voting.Resources.floodCheckThresholdMetMessage);return;case"GuestUser":Roblox.GenericConfirmation.open({titleText:Roblox.Voting.Resources.guestUserTitle,bodyContent:Roblox.Voting.Resources.guestUserMessage,onAccept:function(){window.location.href=Roblox&&Roblox.Endpoints?Roblox.Endpoints.getAbsoluteUrl(Roblox.Voting.Resources.returnUrl):Roblox.Voting.Resources.returnUrl},acceptColor:Roblox.GenericConfirmation.blue,acceptText:Roblox.Voting.Resources.login,declineText:Roblox.Voting.Resources.decline,allowHtmlContentInBody:!0});return;case"AccountAgeOverOneDay":Roblox.GenericModal.open(Roblox.Voting.Resources.accountUnderOneDayTitle,null,Roblox.Voting.Resources.accountUnderOneDayMessage);return;default:Roblox.GenericModal.open(Roblox.Voting.Resources.unknownProblemTitle,null,Roblox.Voting.Resources.unknownProblemMessage);return}};return{Vote:t,Initialize:f,SetVotes:r,UpdateVoteBar:n}}();

;// Leaderboards/Leaderboard.js
"use strict";var Roblox=Roblox||{};Roblox.Leaderboard=function(){function s(n){var i=$(n.find(".rbx-leaderboard-filter")),t;i.on("click",".dropdown-menu a",{leaderboard:n},function(t){var i=$(this).attr("data-time-filter"),r=t.data.leaderboard;n.find(".rbx-leaderboard-data").attr("data-time-filter",i),n.find(".rbx-leaderboard-filtername").text($(this).text()),$('[data-toggle="popover"]').popover("hide"),u(n),e(n)});t=$("."+n.attr("data-associated-leaderboard-more")).find(".rbx-leaderboard-see-more");t.on("click",function(){Roblox.Leaderboard.getMoreItems(n)})}function t(n,t){var i=n.find(".rbx-leaderboard-item-template").clone(),s=t.DisplayRank,r=t.ProfileUri,u=t.UserImageUri,f=t.Name,e=t.ClanName!=null?t.ClanName:"",h=t.DisplayPoints,o=!1;return n.hasClass("rbx-leaderboard-clan")&&(f=t.ClanName,e=t.Name,u=t.ClanImageUri,r=t.ClanUri,o=!0),i.find(".rank").text(s),o?i.find(".avatar").html("<a href='"+r+"'><img src='"+u+"'/></a>"):i.find(".avatar").html("<a class='avatar-card-link' href='"+r+"'><img class='avatar-card-image' src='"+u+"'/></a>"),i.find(".name-and-group").html("<a class='text-name' href='"+r+"'><span class='name text-overflow' title='"+f+"'>"+f+"</span></a><span class='group text-overflow' title='"+e+"'>"+e+"</span>"),i.find(".points").text(h).attr("title",t.FullPoints),i=i.html()}function i(n,t){return $("<div class='rbx-leaderboard-notification'><p>"+t+"</p></div>")}function e(n){var u=n.find(".rbx-leaderboard-data"),f=n.find(".rbx-leaderboard-my"),h=u.attr("data-distributor-target-id"),e=u.attr("data-target-type"),c=u.attr("data-time-filter"),l=u.attr("data-rank-max"),o=u.attr("data-player-id"),s=u.attr("data-clan-id"),a=48,v=48,y="PNG";$.ajax({type:"GET",url:"/leaderboards/rank/json",data:{targetType:e,distributorTargetId:h,timeFilter:c,startIndex:0,currentRank:1,previousPoints:-1,max:l,imgWidth:a,imgHeight:v,imgFormat:y},contentType:"application/json; charset=utf-8",success:function(i){var r,u;if(f.find(".rbx-leaderboard-item, .rbx-leaderboard-notification").remove(),i.length>0){if(e===0&&o!==-1)for(r=0;r<i.length;r++)if(i[r].UserId===o){f.html(t(n,i[r])),n.addClass("rbx-has-rank");break}if(e===1&&s!=-1)for(u=0;u<i.length;u++)if(i[u].TargetId===s){f.html(t(n,i[u])),n.addClass("rbx-has-rank");break}}},error:function(){f.find(".rbx-leaderboard-item").remove(),f.append(i(n,r))}})}function u(u){var f=u.find(".rbx-leaderboard-data"),e=u.find(".rbx-leaderboard-items"),l=e.find(".rbx-leaderboard-more-container"),s=u.find(".spinner"),a=f.attr("data-distributor-target-id"),h=f.attr("data-target-type"),v=f.attr("data-time-filter"),c=f.attr("data-max"),y=48,p=48,w="PNG";e.find(".rbx-leaderboard-item, .rbx-leaderboard-notification").remove(),Roblox.Leaderboard.toggleMore(u,"off"),s.show(),$.ajax({type:"GET",url:"/leaderboards/game/json",data:{targetType:h,distributorTargetId:a,timeFilter:v,startIndex:0,currentRank:1,previousPoints:n[h],max:c,imgWidth:y,imgHeight:p,imgFormat:w},contentType:"application/json; charset=utf-8",success:function(r){s.hide();for(var f in r)l.before(t(u,r[f]));r.length===0?e.append(i(u,o)):(n[h]=r[r.length-1].Points,r.length==c&&Roblox.Leaderboard.toggleMore(u,"on"))},error:function(){s.hide(),e.append(i(u,r))}})}function h(n,t){t=="on"?$("."+n.attr("data-associated-leaderboard-more")).find(".rbx-leaderboard-see-more").removeClass("hidden"):$("."+n.attr("data-associated-leaderboard-more")).find(".rbx-leaderboard-see-more").addClass("hidden")}function c(u){var f=u.find(".rbx-leaderboard-data"),e=u.find(".rbx-leaderboard-items"),l=u.find(".rbx-leaderboard-item"),y=e.find(".rbx-leaderboard-more-container"),o=u.find(".spinner"),p=f.attr("data-distributor-target-id"),s=f.attr("data-target-type"),w=f.attr("data-time-filter"),a=f.attr("data-max"),b=48,k=48,d="PNG",v,h,c;Roblox.Leaderboard.toggleMore(u,"off"),o.show(),v=u.find(".rbx-leaderboard-items .rbx-leaderboard-item").length,h=1,l&&(c=l.last().find(".rank"),c&&(h=parseInt(c.text(),10))),$.ajax({type:"GET",url:"/leaderboards/game/json",data:{targetType:s,distributorTargetId:p,timeFilter:w,startIndex:v,currentRank:h,previousPoints:n[s],max:a,imgWidth:b,imgHeight:k,imgFormat:d},contentType:"application/json; charset=utf-8",success:function(i){o.hide();for(var r in i)y.before(t(u,i[r]));i.length>0&&(n[s]=i[i.length-1].Points,i.length==a&&Roblox.Leaderboard.toggleMore(u,"on"))},error:function(){o.hide(),e.find(".rbx-leaderboard-item").remove(),e.append(i(u,r))}})}function l(){if(!(f>0)){f+=1;var n=[];$("#rbx-leaderboard-container-player, #rbx-leaderboard-container-clan").each(function(t,i){n[t]=$(i),u(n[t]),e(n[t]),s(n[t])})}}var a={Users:0,Clans:1},v={TopLeaders:0,MyRank:1},y={AllTime:3,LastDay:0,LastWeek:1,LastMonth:2},r="Error loading rows.",p="You are not yet ranked for this time period. Go earn some Points!",o="No results found.",f=0,n=[-1,-1];return{init:l,getItems:u,getMoreItems:c,toggleMore:h}}();

;// PlaceProductPromotion.js
var Roblox=Roblox||{};Roblox.PlaceProductPromotion=function(){function n(n){return n.__RequestVerificationToken=$("input[name=__RequestVerificationToken]").val(),n}function i(n,t){var i=Math.floor(Math.random()*9001);$.ajax({type:"GET",url:"/Games/GetPlaceProductPromotions?placeId="+Roblox.PlaceProductPromotion.PlaceID+"&startIndex="+n+"&maxRows="+t+"&cachebuster="+i,contentType:"application/json; charset=utf-8",success:function(n){Roblox.PlaceProductPromotionPager.update(n)},error:function(){$("#PromotionsItemContainer").addClass("empty").text(Roblox.PlaceProductPromotion.Resources.anErrorOccurred)}})}function r(){function i(n){return n.__RequestVerificationToken=$("input[name=__RequestVerificationToken]").val(),n}var t=$("#product-promo-place").val(),n;$(".PromoteModalErrorMessage").hide(),n=$("#PlaceProductPromotionSelectionPanel"),$.ajax({type:"POST",url:"/Games/AddProductPromotionToPlace?placeId="+t+"&productId="+Roblox.PlaceProductPromotionData.ProductID,data:i({}),dataType:"json",success:function(t){if(t.ErrorMsg)n.find(".PromoteModalErrorMessage").text(t.ErrorMsg).show();else{var i=$("<div>"+Roblox.PlaceProductPromotion.Resources.youhaveAdded+"<span></span>"+Roblox.PlaceProductPromotion.Resources.toYourGame+"<b><a></a></b>.</div>");i.find("span").html(Roblox.PlaceProductPromotionData.ProductName),i.find("a").attr("href",t.PlaceURL).text(t.PlaceName),n.find(".roblox-item-image").html("").addClass("thumbs-up-green"),n.find(".PurchaseModalMessageText").html(i).addClass("SuccessMsg"),n.find(".PurchaseModalButtonContainer .promoteBtn").hide(),n.find(".PurchaseModalButtonContainer .dismissBtn").text(Roblox.PlaceProductPromotion.Resources.ok),n.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.success),n.find(".PurchaseModalFooter").text(""),n.find(".PurchaseModalButtonContainer .btn-negative").removeClass("btn-negative").addClass("btn-neutral").html(Roblox.PlaceProductPromotion.Resources.ok)}},error:function(n){$(".PromoteModalErrorMessage").text(n.ErrorMsg).show()}})}function u(t){var i=$("#DeleteProductPromotionModal");$.ajax({type:"POST",url:"/Games/DeletePlaceProductPromotion?promotionId="+t,data:n({}),success:function(){var r=$('.DeleteProductPromotion[data-delete-promotion-id="'+t+'"]').parent().find(".NameDiv").html();i.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.success),i.find(".PurchaseModalMessageText").html(Roblox.PlaceProductPromotion.Resources.youhaveRemoved+"<a>"+r+"</a>"+Roblox.PlaceProductPromotion.Resources.fromYourGame),i.modal(Roblox.PlaceProductPromotion.modalProperties),Roblox.PlaceProductPromotionPager.getItemsPaged(1,3)},error:function(){i.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.error),i.find(".PurchaseModalMessageText").text(Roblox.PlaceProductPromotion.Resources.sorryWeCouldnt),i.modal(Roblox.PlaceProductPromotion.modalProperties)}})}function f(t){var i=$("#DeleteProductPromotionModal");$.ajax({type:"POST",url:"/Games/DeletePlaceProductPromotion?promotionId="+t,data:n({}),success:function(){var r=$('.icon-delete[data-delete-promotion-id="'+t+'"]'),u=r.attr("data-delete-promotion-name");i.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.success),i.find(".PurchaseModalMessageText").html(Roblox.PlaceProductPromotion.Resources.youhaveRemoved+"<a>"+u+"</a>"+Roblox.PlaceProductPromotion.Resources.fromYourGame),i.modal(Roblox.PlaceProductPromotion.modalProperties),r.parents(".list-item").hide()},error:function(){i.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.error),i.find(".PurchaseModalMessageText").text(Roblox.PlaceProductPromotion.Resources.sorryWeCouldnt),i.modal(Roblox.PlaceProductPromotion.modalProperties)}})}function e(n){if(n.length==0&&$("#PromotionsItemContainer .PlaceProductPromotionItem").length==0){$("#PromotionsItemContainer").addClass("empty").html($(".PromotionsItemContainer.empty").html());return}var t=$(".PlaceProductPromotionItem.template").clone().removeClass("template");return t.find(".ItemURL").attr("href",n.ItemUrl).html(fitStringToWidthSafe(n.Name,185)),t.find(".TotalSales").text(n.TotalSales),t.find(".DeleteProductPromotion").attr("data-delete-promotion-id",n.PromotionID),n.PriceInRobux!=undefined?(t.find(".Price").text(n.PriceInRobux),t.find(".PurchaseButton").attr("data-expected-price",n.PriceInRobux).attr("data-promotion-id",n.PromotionID)):n.PriceInTickets!=undefined?(t.find(".Price").removeClass("robux").addClass("tickets").text(n.PriceInTickets),t.find(".PurchaseButton").attr("data-expected-currency",2).removeAttr("data-promotion-id").attr("data-expected-price",n.PriceInTickets).removeAttr("data-placeproductpromotion-id")):t.find(".Price").remove(),n.IsForSale||(t.find(".PurchaseButton").hide(),t.find(".UserOwns").html(Roblox.PlaceProductPromotion.Resources.notForSale).show()),t.find(".PurchaseButton").attr("data-expected-seller-id",n.SellerID).attr("data-seller-name",n.SellerName).attr("data-item-name",n.Name),n.UserOwns===!0&&(t.find(".PurchaseButton").hide(),t.find(".UserOwns").show()),n.IsRentable===!0&&t.find(".PurchaseButton").html(Roblox.PlaceProductPromotion.Resources.rent),t.find("[data-bc-requirement]").attr("data-bc-requirement",n.BCRequirement),t.find("[data-item-id]").attr("data-item-id",n.AssetID),t.find("[data-product-id]").attr("data-product-id",n.ProductID),t.find("[data-placeproductpromotion-id]").attr("data-placeproductpromotion-id",n.PromotionID),t}function o(n){var i=$(".PlaceProductPromotionItem .roblox-item-image[data-item-id="+n.AssetID+"]").parent(),r=i.find(".roblox-item-image"),t;Roblox.require("Widgets.ItemImage",function(n){n.load(r)}),t=i.find(".PurchaseButton"),t.unbind(),t.click(function(){return Roblox.PlaceProductPromotionItemPurchase.openPurchaseVerificationView(t[0]),!1}),i.find(".DeleteProductPromotion").click(function(){var n=$(this).data("delete-promotion-id");Roblox.PlaceProductPromotion.DeleteProductPromotion(n)})}function s(){$("#product-promo-group").change(function(){var n=this.value;$("#product-promo-place").load("/Games/ProductPromotionPlaceDropDown?groupId="+n)}),$(".promoteBtn").click(function(){return Roblox.PlaceProductPromotion.AddPlaceProductPromotion(),!1}),$(".BuyPriceBoxContainer .PromoteModalBtn").click(function(){var n={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"}};$("#PlaceProductPromotionSelectionPanel").modal(n),Roblox.require("Widgets.ItemImage",function(n){n.populate($("#PlaceProductPromotionSelectionPanel .roblox-item-image"))})}),$(".add-gear-to-game-container .promote-modal-btn").click(function(){var n={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"}};$("#PlaceProductPromotionSelectionPanel").modal(n),Roblox.require("Widgets.ItemImage",function(n){n.populate($("#PlaceProductPromotionSelectionPanel .roblox-item-image"))})})}var h,t={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"}};return{GetPlacePromotions:i,FormatPlacePromotion:e,FormatPlacePromotionCallback:o,DeleteProductPromotion:u,modalProperties:t,AddPlaceProductPromotion:r,SetUpAddPlaceProductPromotion:s,DeleteGear:f}}();

;// GamePass.js
var Roblox=Roblox||{};Roblox.GamePass=function(){function n(n){var t,i,r;if(n.length==0)$(".GamePassesDisplayContainer").hasClass("OwnerIsViewing")?($("#GamePassesItemContainer").text(Roblox.GamePass.Resources.noneforSale),$("#GamePassesPagerContainer").hide()):$(".GamePassesDisplayContainer").hide();else return t=$(".GamePasses.PlacePagePagersItem.template").clone().removeClass("template"),t.find(".ItemURL").attr("href",n.PassItemURL).text(fitStringToWidthSafeText(n.PassName,100)),t.find(".TotalSales").text(n.TotalSales),t.find("[data-item-purchase-enabled=False]").css("display","block"),i=t.find(".PurchaseButton"),n.PriceInTickets>0&&(i.attr("data-expected-currency",2).attr("data-expected-price",n.PriceInTickets),t.find(".Price.tickets").text(n.PriceInTickets).show()),n.PriceInRobux>0&&(i.attr("data-expected-currency",1).attr("data-expected-price",n.PriceInRobux),t.find(".Price.robux").text(n.PriceInRobux).show()),n.PriceInRobux==0&&n.PriceInTickets==0&&(i.attr("data-expected-currency",1).attr("data-expected-price",0),t.find(".Price.robux-text").text("FREE").show()),n.PriceInTickets>0&&n.PriceInRobux>0&&t.find("input").attr("name","currency_"+n.PassID).show(),i.attr("data-expected-price",r).attr("data-item-name",n.PassName),n.UserOwns===!0&&(t.find(".PurchaseButton").hide(),t.find("input").attr("name","currency_"+n.PassID).hide(),t.find(".UserOwns").show()),t.find("[data-item-id]").attr("data-item-id",n.PassID),t.find("[data-product-id]").attr("data-product-id",n.ProductID),t}function t(n,t){placeId=Roblox.GamePassJSData.PlaceID;var i=Math.floor(Math.random()*9001);$.ajax({type:"GET",url:"/Games/GetGamePassesPaged?placeId="+placeId+"&startIndex="+n+"&maxRows="+t+"&cachebuster="+i,contentType:"application/json; charset=utf-8",success:function(n){Roblox.GamePassesPager.update(n)},error:function(){$("#GamePassesItemContainer").addClass("empty").text(anErrorOccurred)}})}function i(n){var i=$(".GamePasses.PlacePagePagersItem .roblox-item-image[data-item-id="+n.PassID+"]"),t;Roblox.require("Widgets.ItemImage",function(n){n.load(i)}),t=$(".GamePasses.PlacePagePagersItem .PurchaseButton[data-item-id="+n.PassID+"]"),t.click(function(){return Roblox.GamePassItemPurchase.openPurchaseVerificationView(t[0]),!1}),$(".GamePasses.PlacePagePagersItem input:radio").change(function(n){var i=$(n.target),t=i.parents(".InfoContainer");i.hasClass("robux")?t.find(".PurchaseButton").attr("data-expected-currency",1).attr("data-expected-price",t.find(".Price.robux").text()):t.find(".PurchaseButton").attr("data-expected-currency",2).attr("data-expected-price",t.find(".Price.tickets").text())})}return{getGamePasses:t,formatGamePassHTML:n,FormatGamePassCallback:i}}(),Roblox.GamePass.Resources={noneforSale:"None of your game passes are currently for sale.",anErrorOccurred:"An error occurred, please try again."};

;// ItemPurchaseForDialog.js
var Roblox=Roblox||{};Roblox.ItemPurchase=function(n,t,i){function o(n){n+="";for(var i=n.split("."),t=i[0],u=i.length>1?"."+i[1]:"",r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1,$2");return t+u}function w(n){return n<1?n+"":n<1e4?o(n):n>=1e6?Math.floor(n/1e6)+"M+":Math.floor(n/1e3)+"K+"}function s(){window.location.href=Roblox.Endpoints.getAbsoluteUrl("/login/Default.aspx")+"?ReturnUrl="+encodeURIComponent(location.pathname+location.search)}function k(n){return n.toUpperCase()===h?h:n}function e(n,r){var f=$(n),p;if(f.attr("data-modal-field-validation-required")==="true"&&(r=""),Roblox.Dialog.toggleProcessing(!0),!f.hasClass("btn-disabled-primary")){var s=f.attr("data-product-id"),h=parseInt(f.attr("data-expected-price")),a=f.attr("data-expected-currency"),e=f.attr("data-placeproductpromotion-id"),y=f.attr("data-expected-seller-id"),o=f.attr("data-userasset-id");if(t)return t({productId:s,expectedPrice:h,expectedCurrency:a,expectedPromoId:e,expectedSellerId:y,userAssetId:o});p=Roblox.Endpoints.getAbsoluteUrl("/API/Item.ashx")+"?rqtype=purchase&productID="+s+"&expectedCurrency="+a+"&expectedPrice="+h+(e===undefined?"":"&expectedPromoID="+e)+"&expectedSellerID="+y+(o===undefined?"":"&userAssetID="+o),$.ajax({type:"POST",url:p,contentType:"application/json; charset=utf-8",success:function(n){n.statusCode==500?(Roblox.Dialog.toggleProcessing(!1,r),u(n)):(Roblox.Dialog.toggleProcessing(!1,r),i?v():c(n))},error:function(n){if(Roblox.Dialog.toggleProcessing(!1,r),$.modal.close(".ProcessingView"),n.responseText==="Bad Request")Roblox.Dialog.open({titleText:Roblox.ItemPurchase.strings.errorOccured,bodyContent:Roblox.ItemPurchase.strings.purchasingUnavailable,imageUrl:l,acceptText:Roblox.ItemPurchase.strings.okText,acceptColor:Roblox.Dialog.white,declineColor:Roblox.Dialog.none,dismissable:!0,allowHtmlContentInBody:!0});else{var t=$.parseJSON(n.responseText);u(t)}}})}}function u(n){var t,r;if(n.showDivID==="TransactionFailureView")Roblox.Dialog.open({titleText:n.title,bodyContent:n.errorMsg,imageUrl:l,acceptText:Roblox.ItemPurchase.strings.okText,acceptColor:Roblox.Dialog.white,declineColor:Roblox.Dialog.none,dismissable:!0,allowHtmlContentInBody:!0});else if(n.showDivID==="InsufficientFundsView"){var i="",u="",f=!1;i=n.currentCurrency==1?Roblox.ItemPurchase.strings.buyText+" ROBUX":Roblox.ItemPurchase.strings.tradeCurrencyText,Roblox.Dialog.open({titleText:Roblox.ItemPurchase.strings.insufficientFundsTitle,bodyContent:Roblox.ItemPurchase.strings.insufficientFundsText.format(Roblox.NumberFormatting.commas(n.shortfallPrice)),acceptText:i,acceptColor:Roblox.Dialog.green,onAccept:function(){return window.location=n.currentCurrency==1?Roblox.Endpoints.getAbsoluteUrl("/Upgrades/Robux.aspx")+"?ctx="+n.source:Roblox.Endpoints.getAbsoluteUrl("/My/Money.aspx")+"?tab=TradeCurrency",!1},declineText:Roblox.ItemPurchase.strings.cancelText,imageUrl:nt,footerText:u,allowHtmlContentInBody:!0,allowHtmlContentInFooter:f,fieldValidationRequired:!0,dismissable:!0,xToCancel:!0})}else n.showDivID==="PriceChangedView"&&(t="targetSelector"in n?$(n.targetSelector):$(".PurchaseButton[data-item-id="+n.AssetID+"][data-expected-currency="+n.expectedCurrency+"][data-expected-price="+n.expectedPrice+"]"),r=function(){t.attr("data-expected-price",n.currentPrice),t.attr("data-expected-currency",n.currentCurrency),e(t,"PurchaseVerificationView")},Roblox.Dialog.open({titleText:Roblox.ItemPurchase.strings.priceChangeTitle,bodyContent:Roblox.ItemPurchase.strings.priceChangeText.format(n.expectedPrice,n.currentPrice),acceptText:Roblox.ItemPurchase.strings.buyNowText,acceptColor:Roblox.Dialog.green,onAccept:r,declineText:Roblox.ItemPurchase.strings.cancelText,footerText:Roblox.ItemPurchase.strings.balanceText.format(n.balanceAfterSale),allowHtmlContentInBody:!0,allowHtmlContentInFooter:!0,dismissable:!0}))}function g(n,t){var i,lt,ut,rt,ot,st,h,nt,ct,r,c,vt;if(t=typeof t!="undefined"?t:"item",i=$(n),!i.hasClass("btn-disabled-primary")){if(tt){u({showDivID:"TransactionFailureView",title:"Error",errorMsg:y});return}if(lt=i.attr("data-bc-requirement"),lt>p&&a==="False"){showBCOnlyModal("BCOnlyModal");return}var wt=i.attr("data-item-name").escapeHTML(),l=parseInt(i.attr("data-expected-price")),ht=i.attr("data-expected-currency"),pt=k(i.attr("data-seller-name")),et=i.attr("data-asset-type"),yt=i.attr("data-item-id"),ft=$("#ItemPurchaseAjaxData").attr("data-footer-text"),at=ft==null?"":ft;if($("#ItemPurchaseAjaxData").attr("data-footer-text",null),f=et=="Place",a==="True"){s();return}ut=!1,i.hasClass("rentable")&&(ut=!0),rt=ht=="1"?parseInt(d):parseInt(b);var it=rt-l,g="",w="",v="";if(ut?(g=Roblox.ItemPurchase.strings.rentText,w=Roblox.ItemPurchase.strings.rentItemTitle,v=Roblox.ItemPurchase.strings.rentNowText):l==0?(g=Roblox.ItemPurchase.strings.getText,w=Roblox.ItemPurchase.strings.getItemTitle,v=Roblox.ItemPurchase.strings.getNowText):(g=Roblox.ItemPurchase.strings.buyTextLower,w=Roblox.ItemPurchase.strings.buyItemTitle,v=Roblox.ItemPurchase.strings.buyNowText),it<0){ot={shortfallPrice:0-it,currentCurrency:ht,showDivID:"InsufficientFundsView",isPlace:f,source:t},u(ot);return}st=$("#ItemPurchaseAjaxData").attr("data-imageurl"),h="",h=l==0?"<span class='text-robux'>"+Roblox.ItemPurchase.strings.freeText+"</span>":"<span class='icon-robux-16x16'></span><span class='text-robux'>"+Roblox.NumberFormatting.commas(l)+"</span>",nt="",nt+=o(it),ct=function(){return e(n,"PurchaseVerificationView")},r=i.attr("data-purchase-title-text"),r=r?r:w,c=i.attr("data-purchase-body-content"),c=c?c.format(h):Roblox.ItemPurchase.strings.buyItemText.format(g,wt,et,pt,h,f?Roblox.ItemPurchase.strings.accessText:""),vt=i.attr("data-modal-field-validation-required")==="true",Roblox.Dialog.open({titleText:r,bodyContent:c,imageUrl:st,xToCancel:!0,acceptText:f?Roblox.ItemPurchase.strings.buyAccessText:v,acceptColor:Roblox.Dialog.green,onAccept:ct,declineText:Roblox.ItemPurchase.strings.cancelText,footerText:(at.length==0?Roblox.ItemPurchase.strings.balanceText:at).format(nt),allowHtmlContentInBody:!0,allowHtmlContentInFooter:!0,dismissable:!0,fieldValidationRequired:vt,cssClass:"need-padding",onOpenCallback:function(){$(".modal-confirmation .roblox-item-image").html("").attr("data-item-id",yt),Roblox.require("Widgets.ItemImage",function(n){n.load($(".modal-confirmation .roblox-item-image"))})}})}}function v(){var n=$(".system-feedback .alert-success");n.length>0&&Roblox.BootstrapWidgets&&(Roblox.BootstrapWidgets.ToggleSystemMessage(n,100,1e3),setTimeout(function(){window.location.reload()},1e3))}function c(t){var i;i=t.Price==0?"<span class='text-robux'>"+Roblox.ItemPurchase.strings.freeText+"</span>":"<span class='icon-robux-16x16'></span><span class='text-robux'>"+t.Price+"</span>";var s=$("#ItemPurchaseAjaxData").attr("data-imageurl"),h=function(){var n=$("#ItemPurchaseAjaxData").attr("data-continueshopping-url");n!=undefined&&n!=""&&(document.location.href=n)},c=function(){var n=Roblox.Endpoints.getAbsoluteUrl("/My/Character.aspx");n!=undefined&&n!=""&&(document.location.href=n)},r="",u=Roblox.ItemPurchase.strings.continueText,e=Roblox.Dialog.none,l=f?Roblox.ItemPurchase.strings.accessText:"",o;t.AssetType==="VIP Server"?(r=Roblox.ItemPurchase.strings.continueShoppingText,u=Roblox.ItemPurchase.strings.notNowText,e=Roblox.Dialog.blue,o=h):t.AssetIsWearable&&(r=Roblox.ItemPurchase.strings.customizeCharacterText,e=Roblox.Dialog.white,u=Roblox.ItemPurchase.strings.notNowText,o=c),Roblox.Dialog.open({titleText:Roblox.ItemPurchase.strings.purchaseCompleteTitle,bodyContent:Roblox.ItemPurchase.strings.purchaseCompleteText.format(t.TransactionVerb,t.AssetName,t.AssetType,t.SellerName,i,l),imageUrl:s,acceptText:r,declineText:u,xToCancel:!0,onAccept:o,onDecline:function(){window.location.reload()},acceptColor:e,declineColor:Roblox.Dialog.white,allowHtmlContentInBody:!0,dismissable:!0,onOpenCallback:function(){$(".modal-confirmation .roblox-item-image").html("").attr("data-item-id",t.AssetID),Roblox.require("Widgets.ItemImage",function(n){n.load($(".modal-confirmation .roblox-item-image"))})}}),n(t)}if(!(this instanceof Roblox.ItemPurchase))return new Roblox.ItemPurchase(n,t,i);t=typeof t=="undefined"?!1:t;var r=$("#ItemPurchaseAjaxData"),a=r.attr("data-authenticateduser-isnull"),d=r.attr("data-user-balance-robux"),b=r.attr("data-user-balance-tickets"),p=r.attr("data-user-bc"),l=r.attr("data-alerturl"),nt=r.attr("data-inSufficentFundsurl"),f=!1,tt=r.attr("data-has-currency-service-error")==="True",y=r.attr("data-currency-service-error-message"),h="ROBLOX";return{purchaseItem:e,openPurchaseVerificationView:g,openPurchaseConfirmationView:c,redirectToLogin:s,purchaseConfirmationCallback:n,openErrorView:u,addCommasToMoney:o,formatMoney:w}},Roblox.ItemPurchase.ModalClose=function(n){$.modal.close("."+n)},Roblox.ItemPurchase.strings={insufficientFundsTitle:"Insufficient Funds",insufficientFundsText:"You need <span class='icon-robux-16x16'></span><span class='text-robux'>{0}</span> more to purchase this item. ",cancelText:"Cancel",okText:"OK",buyText:"Buy",buyTextLower:"buy",tradeCurrencyText:"Trade Currency",priceChangeTitle:"Item Price Has Changed",priceChangeText:"While you were shopping, the price of this item changed from <span class='icon-robux-gray-16x16'></span>{0} to <span class='icon-robux-gray-16x16'></span>{1}.",buyNowText:"Buy Now",buyAccessText:"Buy Access",buildersClubOnlyTitle:"{0} Only",buildersClubOnlyText:"You need {0} to buy this item.",buyItemTitle:"Buy Item",buyItemText:"Would you like to {0} {5}the {2}: <span class='font-bold'>{1}</span> from {3} for {4}?",balanceText:"Your balance after this transaction will be <span class='icon-robux-gray-16x16'></span>{0}",freeText:"Free",purchaseCompleteTitle:"Purchase Complete",purchaseCompleteText:"You have successfully {0} {5}the <span class='font-bold'>{1}</span> {2} from {3} for {4}.",continueShoppingText:"Configure",notNowText:"Not Now",continueText:"Continue",customizeCharacterText:"Customize",orText:"or",rentItemTitle:"Rent Item",rentText:"rent",rentNowText:"Rent Now",getItemTitle:"Get Item",getText:"get",getNowText:"Get Now",accessText:"access to ",invalidLinkTitle:"Invalid Link",invalidLinkText:"This VIP Server link is no longer valid.",errorOccured:"Error Occured",purchasingUnavailable:"Purchasing is temporarily unavailable. Please try again later."};

;// jquery.history.js
typeof window.console=="undefined"&&(window.console={}),typeof window.console.emulated=="undefined"&&(typeof window.console.log=="function"?window.console.hasLog=!0:(typeof window.console.log=="undefined"&&(window.console.log=function(){}),window.console.hasLog=!1),typeof window.console.debug=="function"?window.console.hasDebug=!0:(typeof window.console.debug=="undefined"&&(window.console.debug=window.console.hasLog?function(){for(var t=["console.debug:"],n=0;n<arguments.length;n++)t.push(arguments[n]);window.console.log.apply(window.console,t)}:function(){}),window.console.hasDebug=!1),typeof window.console.warn=="function"?window.console.hasWarn=!0:(typeof window.console.warn=="undefined"&&(window.console.warn=window.console.hasLog?function(){for(var t=["console.warn:"],n=0;n<arguments.length;n++)t.push(arguments[n]);window.console.log.apply(window.console,t)}:function(){}),window.console.hasWarn=!1),typeof window.console.error=="function"?window.console.hasError=!0:(typeof window.console.error=="undefined"&&(window.console.error=function(){var t="An error has occured.",i,n;if(window.console.hasLog){for(i=["console.error:"],n=0;n<arguments.length;n++)i.push(arguments[n]);window.console.log.apply(window.console,i),t="An error has occured. More information is available in your browser's javascript console."}for(n=0;n<arguments.length;++n){if(typeof arguments[n]!="string")break;t+="\n"+arguments[n]}if(typeof Error!="undefined")throw new Error(t);else throw t;}),window.console.hasError=!1),typeof window.console.trace=="function"?window.console.hasTrace=!0:(typeof window.console.trace=="undefined"&&(window.console.trace=function(){window.console.error("console.trace does not exist")}),window.console.hasTrace=!1),window.console.emulated=!0),function(n){n.History||!1?window.console.warn("$.History has already been defined..."):(n.History={options:{debug:!1},state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},extractHash:function(n){return n.replace(/^[^#]*#/,"").replace(/^#+|#+$/,"")},getState:function(){var t=n.History;return t.state},setState:function(t){var i=n.History;return t=i.extractHash(t),i.state=t},getHash:function(){var t=n.History;return t.extractHash(window.location.hash||location.hash)},setHash:function(t){var i=n.History;return t=i.extractHash(t),typeof window.location.hash!="undefined"?window.location.hash!==t&&(window.location.hash=t):location.hash!==t&&(location.hash=t),t},go:function(t){var i=n.History,r,u;return t=i.extractHash(t),r=i.getHash(),u=i.getState(),t!==r?i.setHash(t):(t!==u&&i.setState(t),i.trigger()),!0},hashchange:function(){var i=n.History,r=i.getHash();return i.go(r),!0},bind:function(t,i){var r=n.History;return i?(typeof r.handlers.specific[t]=="undefined"&&(r.handlers.specific[t]=[]),r.handlers.specific[t].push(i)):(i=t,r.handlers.generic.push(i)),!0},trigger:function(t){var u=n.History,i,f,e,r;if(typeof t=="undefined"&&(t=u.getState()),typeof u.handlers.specific[t]!="undefined")for(r=u.handlers.specific[t],i=0,f=r.length;i<f;++i)e=r[i],e(t);for(r=u.handlers.generic,i=0,f=r.length;i<f;++i)e=r[i],e(t);return!0},construct:function(){var t=n.History;return n(document).ready(function(){t.domReady()}),!0},configure:function(t){var i=n.History;return i.options=n.extend(i.options,t),!0},domReadied:!1,domReady:function(){var t=n.History;if(!t.domRedied)return t.domRedied=!0,t.$window=n(window),t.$window.bind("hashchange",this.hashchange),setTimeout(t.hashchangeLoader,200),!0},nativeSupport:function(t){t=t||n.browser;var e=t.version,o=parseInt(e,10),u=e.split(/[^0-9]/g),r=parseInt(u[0],10),f=parseInt(u[1],10),s=parseInt(u[2],10),i=!1;return(t.msie||!1)&&o>=8?i=!0:(t.webkit||!1)&&o>=528?i=!0:t.mozilla||!1?r>1?i=!0:r===1&&(f>9?i=!0:f===9&&s>=2&&(i=!0)):(t.opera||!1)&&(r>10?i=!0:r===10&&f>=60&&(i=!0)),i},hashchangeLoader:function(){var t=n.History,f=t.nativeSupport(),r,i,u;return f?(u=t.getHash(),u&&t.$window.trigger("hashchange")):(n.browser.msie?(t.$iframe=n('<iframe id="jquery-history-iframe" style="display: none;"></$iframe>').prependTo(document.body)[0],t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close(),i=!1,r=function(){var n=t.getHash(),r=t.getState(),u=t.extractHash(t.$iframe.contentWindow.document.location.hash);r!==n?(i||(t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close(),t.$iframe.contentWindow.document.location.hash=n),i=!1,t.$window.trigger("hashchange")):r!==u&&(i=!0,t.setHash(u))}):r=function(){var n=t.getHash(),i=t.getState();i!==n&&t.$window.trigger("hashchange")},setInterval(r,200)),!0}},n.History.construct())}(jQuery);

;// utilities/robloxTabs.js
$(function(){$.History.bind(function(n){var t="#"+n.substring(2);$(".rbx-tab a").each(function(){$(this).attr("href")==t&&$(this).click()})});var n=".rbx-tab";$(n).click(function(n){if(n.hasOwnProperty("originalEvent")){var t="!/"+$(this).find("a").attr("href").substring(1);$.History.go(t)}})});

;// utilities/dialog.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.Dialog=="undefined"&&(Roblox.Dialog=function(){function d(){n.isOpen=!1,r()}function nt(r){var v,s,h,o,a;n.isOpen=!0,v={titleText:"",bodyContent:"",footerText:"",acceptText:Roblox.Resources.Dialog.yes,declineText:Roblox.Resources.Dialog.No,acceptColor:f,declineColor:e,xToCancel:!1,onAccept:function(){return!1},onDecline:function(){return!1},onCancel:function(){return!1},imageUrl:null,allowHtmlContentInBody:!1,allowHtmlContentInFooter:!1,dismissable:!0,fieldValidationRequired:!1,onOpenCallback:function(){},cssClass:null},r=$.extend({},v,r),u.overlayClose=r.dismissable,u.escClose=r.dismissable,s=$(t),s.html(r.acceptText),s.attr("class",r.acceptColor),s.unbind(),s.bind("click",function(){return l(s)?!1:(r.fieldValidationRequired?y(r.onAccept):c(r.onAccept),!1)}),h=$(i),h.html(r.declineText),h.attr("class",r.declineColor),h.unbind(),h.bind("click",function(){return l(h)?!1:(c(r.onDecline),!1)}),o=$('[data-modal-type="confirmation"]'),o.find(".modal-title").text(r.titleText),r.imageUrl==null?o.addClass("noImage"):(o.find("img.modal-thumb").attr("src",r.imageUrl),o.removeClass("noImage")),r.cssClass!=null&&o.addClass(r.cssClass),r.allowHtmlContentInBody?o.find(".modal-message").html(r.bodyContent):o.find(".modal-message").text(r.bodyContent),$.trim(r.footerText)==""?o.find(".modal-footer").hide():o.find(".modal-footer").show(),r.allowHtmlContentInFooter?o.find(".modal-footer").html(r.footerText):o.find(".modal-footer").text(r.footerText),o.modal(u),a=$(".modal-header .close"),a.unbind(),a.bind("click",function(){return c(r.onCancel),!1}),r.xToCancel||a.hide(),$("#rbx-body").addClass("modal-mask"),r.onOpenCallback()}function a(n){n.hasClass(e)?n.addClass(h):n.hasClass(v)?n.addClass(o):n.hasClass(f)&&n.addClass(s)}function l(n){return n.hasClass(s)||n.hasClass(h)||n.hasClass(o)?!0:!1}function p(){var n=$(t),r=$(i);a(n),a(r)}function w(){var u=$(t),r=$(i),n=s+" "+h+" "+o;u.removeClass(n),r.removeClass(n)}function b(){if(n.isOpen){var i=$(t);i.click()}}function k(){var n=$(i);n.click()}function r(t){n.isOpen=!1,typeof t!="undefined"?$.modal.close(t):$.modal.close(),$("#rbx-body").removeClass("modal-mask")}function c(n){r(),typeof n=="function"&&n()}function y(n){if(typeof n=="function"){var t=n();if(t!=="undefined"&&t==!1)return!1}r()}function tt(n,t){var i=$(".modal-body");n?(i.find(".modal-btns").hide(),i.find(".modal-processing").show()):(i.find(".modal-btns").show(),i.find(".modal-processing").hide()),typeof t!="undefined"&&t!==""&&$.modal.close("."+t)}var v="btn-primary-md",f="btn-secondary-md",e="btn-control-md",o="btn-primary-md disabled",s="btn-secondary-md disabled",h="btn-control-md disabled",g="btn-none",t=".modal-btns #confirm-btn",i=".modal-btns #decline-btn",n={isOpen:!1},u={overlayClose:!0,escClose:!0,opacity:80,zIndex:1040,overlayCss:{backgroundColor:"#000"},onClose:d,focus:!1};return{open:nt,close:r,disableButtons:p,enableButtons:w,clickYes:b,clickNo:k,status:n,toggleProcessing:tt,green:v,blue:f,white:e,none:g}}()),$(document).keypress(function(n){Roblox.Dialog.isOpen&&n.which===13&&Roblox.Dialog.clickYes()});

;// Games/GameDetailReferral.js
Roblox=Roblox||{},Roblox.GameDetailReferral=Roblox.GameDetailReferral||{},Roblox.GameDetailReferral.AppendUrl=function(n,t,i){if(!n.data("modified")){var e=$(t).length,u=i||n,f=u.attr("href"),r=f;r+=f.indexOf("?")!==-1?"&":"?",r+="LocalTimestamp="+(new Date).toISOString()+"&TotalInSort="+e,u.attr("href",r),n.data("modified",!0)}},$(function(){var n=".game-card-link";$("#recently-visited-places").on("mousedown",".game-card",function(){Roblox.GameDetailReferral.AppendUrl($(this).find(n),"#recently-visited-places .list-item")});$("#my-favorties-games").on("mousedown",".game-card",function(){Roblox.GameDetailReferral.AppendUrl($(this).find(n),"#my-favorties-games .game-card")});$("#friend-activity").on("mousedown",".game-card",function(){Roblox.GameDetailReferral.AppendUrl($(this).find(n),"#friend-activity .game-card")});$("#UserPlaces div.Thumbnail").on("mousedown",function(){Roblox.GameDetailReferral.AppendUrl($(this),".Thumbnail",$(this).find("a"))});$("#GamesListsContainer").on("mousedown",".game-card",function(){var t=$(this).parent().siblings().length+1;Roblox.GameDetailReferral.AppendUrl($(this).find(n),new Array(t))});$("#my-recommended-games").on("mousedown",".game-card",function(){Roblox.GameDetailReferral.AppendUrl($(this).find(n),"#my-recommended-games .game-card")});$("#HomeContainer #FeaturedGamesContainer").on("mousedown",".item-place a",function(){Roblox.GameDetailReferral.AppendUrl($(this),"#FeaturedGamesContainer .item-place")})});

;// Game/GameDetailsInteractionEvents.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.GameDetailsInteractionEvents=="undefined"&&(Roblox.GameDetailsInteractionEvents=function(){var i=!1,t,r=function(){return{pid:t}},n=function(n){Roblox.EventStream&&Roblox.EventStream.SendEvent("gameDetailsTabInteraction",n,r(t))},u=function(){n("about")},f=function(){n("store")},e=function(){n("leaderboards")},o=function(){n("gameInstances")},s=function(){i||(i=!0,t=$(".rbx-tabs-horizontal").data("place-id"),$("#tab-about").mousedown(u),$("#tab-store").mousedown(f),$("#tab-leaderboards").mousedown(e),$("#tab-game-instances").mousedown(o))};return{Init:s}}()),$(function(){Roblox.GameDetailsInteractionEvents.Init()});

;// PrivateServers/LinkJoin.js
var Roblox=Roblox||{};Roblox.PrivateServerLinkJoin=function(){var n,t=function(t){n=t},i=function(){typeof n=="function"&&n()};return{init:t,execute:i}}();

;// utilities/robloxAds.js
"use strict";var Roblox=Roblox||{};Roblox.AdsHelper=Roblox.AdsHelper||{},Roblox.AdsLibrary={},Roblox.AdsLibrary.adsIdList=["Skyscraper-Adp-Left","Skyscraper-Adp-Right","Leaderboard-Abp","GamePageAdDiv1","GamePageAdDiv2","GamePageAdDiv3","ProfilePageAdDiv1","ProfilePageAdDiv2"],Roblox.AdsLibrary.adsParameters={"Skyscraper-Adp-Left":{element:$("#Skyscraper-Adp-Left"),template:null,fitTwoAds:!0,fitOneAd:!1,isSkyscraper:!0},"Skyscraper-Adp-Right":{element:$("#Skyscraper-Adp-Right"),tempalte:null,fitTwoAds:!0,fitOneAd:!0,isSkyscraper:!0},"Leaderboard-Abp":{element:$("#Leaderboard-Abp"),tempalte:null,fitTwoAds:!0,fitOneAd:!0,isLeaderboard:!0},GamePageAdDiv1:{element:$("#GamePageAdDiv1"),template:null,isPageAd:!0},GamePageAdDiv2:{element:$("#GamePageAdDiv2"),template:null,isPageAd:!0},GamePageAdDiv3:{element:$("#GamePageAdDiv3"),template:null,isPageAd:!0},ProfilePageAdDiv1:{element:$("#ProfilePageAdDiv1"),template:null,isPageAd:!0},ProfilePageAdDiv2:{element:$("#ProfilePageAdDiv2"),template:null,isPageAd:!0}},Roblox.AdsHelper.AdRefresher=function(){function c(n){return!n||!$.trim($(n).html())}function h(n){t.push(n)}function s(){return googletag.pubadsReady}function r(n){var u,f,e,i;typeof n=="undefined"&&(n=v),u=!1;for(f in t){if(e="#"+t[f]+" [data-js-adtype]",i=$(e),typeof i=="undefined")return;if(i.attr("data-js-adtype")==="iframead")o(i);else if(i.attr("data-js-adtype")==="gptAd")if(s())u=!0;else if(n>0){setTimeout(function(){r(--n)},y);break}}u&&googletag.cmd.push(function(){googletag.pubads().refresh()})}function o(n){var i=n.attr("src"),r,u,t;typeof i=="string"&&(r=i.indexOf("?")<0?"?":"&",u=i+r+"nocache="+(new Date).getMilliseconds().toString(),typeof n[0]!="undefined")&&(t=n[0].contentDocument,t===undefined&&(t=n[0].contentWindow),t.location.href!=="about:blank"&&t.location.replace(u))}function n(n,t,i){i.length&&c(i)&&(i.append(n),r())}function b(){for(var u=$(window).width(),f,r,t,i=0;i<Roblox.AdsLibrary.adsIdList.length;i++)r=Roblox.AdsLibrary.adsIdList[i],t=Roblox.AdsLibrary.adsParameters[r],t&&!t.template&&(f=t.element,t.template=f.html());for(i=0;i<Roblox.AdsLibrary.adsIdList.length;i++)(r=Roblox.AdsLibrary.adsIdList[i],t=Roblox.AdsLibrary.adsParameters[r],t)&&(t.isSkyscraper?u>=e&&t.fitTwoAds?n(t.template,r,t.element):u<e&&u>=l?t.fitOneAd?n(t.template,r,t.element):t.element.empty():t.element.empty():t.isLeaderboard?u<p?t.element.empty():n(t.template,r,t.element):t.isPageAd&&(u<w?t.element.empty():n(t.template,r,t.element)))}var t=[],i=20,u=970,f=160,p=728,y=100,v=16,e=$("[data-max-width-for-two-ads]").attr("data-max-width-for-two-ads")||u+f*2+48-i,l=$("[data-max-width-for-one-ads]").attr("data-max-width-for-one-ads")||u+f+24-i,a=1024,w=a-i;return{registerAd:h,refreshAds:r,adjustAdsFitScreen:b,getAds:n}}(),Roblox.AdsHelper.DynamicAdCreator=function(){function n(){var n=$(".dynamic-ad").filter(".unpopulated");n.each(function(n,t){var i=$(t),u=i.attr("data-ad-slot"),f=parseInt(i.attr("data-ad-width")),e=parseInt(i.attr("data-ad-height")),r=i.children(".ad-slot").attr("id");googletag.cmd.push(function(){var n=googletag.defineSlot(u,[f,e],r).addService(googletag.pubads());googletag.display(r),googletag.pubads().refresh([n])}),i.removeClass("unpopulated")})}return{populateNewAds:n}}(),$(function(){$(window).resize(function(){Roblox.AdsHelper.AdRefresher.adjustAdsFitScreen()})});

;// Game/SignupWallPlayButton.js
$(function(){$("#signup-wall-button").click(function(){var r=$(this),t=r.data("place-id"),i=function(n){window.location.href="/games/"+t.toString()+"/view?autoplayUserId="+n.toString()},u={onSignupSuccess:function(n){i(n)},onLoginSuccess:function(n){i(n)}};Roblox.GamePlayEvents.SendGamePlayIntent("PlayButtonSignup",t),Roblox.SignupOrLoginModal.show(u)})});

;// widgets/Favorites.js
$(function(){Roblox=Roblox||{};var i=$("#favorite-icon"),c=$("#toggle-favorite"),u=$(".favorite-button-container .tooltip-container"),f=i.length,e=c.data("signin-url"),l="Login Required",o="Remove from Favorites",s="Add to Favorites",a="<div>You must be logged in to favorite this game.</div><div>Please <a href='"+e+"'>Login or Register</a> to continue</div>",r=$(".favoriteCount"),n=0,v=$(".favorite-button, #toggle-favorite"),t=i.hasClass("favorited"),h=t?o:s,y=["0","1","2","3","4","5","6","7","8","9"];f?u.attr("data-original-title",h):u.attr("title",h),v.click(function(){var u=$(this);u.find(i).hasClass("icon-favorite")&&u.attr("data-isguest").toLowerCase()==="true"?Roblox.GenericConfirmation.open({titleText:l,bodyContent:a,onAccept:function(){window.location.href=e},acceptColor:Roblox.GenericConfirmation.blue,acceptText:"Login",declineText:"Cancel",allowHtmlContentInBody:!0}):$.post(u.data("toggle-url"),{assetID:u.data("assetid")},function(e){var l,c,a,p,v,h;if(e.success){for(t=!t,u.find(i).toggleClass("favorited"),l=!0,c=r.text(),a=0;a<c.length&&l;a++)p=c[a],p!==","&&$.inArray(p,y)<0&&(l=!1);l&&(c=c.replace(",",""),n=parseInt(c,10)),v="",h="",v=t?o:s,l&&!isNaN(n)&&(t?n++:n--,h=n.toString(10),n>=1e4?h="10K+":n>=1e3&&(h=[h.slice(0,1),",",h.slice(1)].join("")),n>0?r.text(h):r.text("0")),f?u.closest(".tooltip-container").attr("data-original-title",v):u.closest("a").attr("title",v)}})})});

;// NumberFormatting.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.NumberFormatting=="undefined"&&(Roblox.NumberFormatting=function(){var n=function(n){if(typeof n!="number")throw"'number' is not a number";return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t=function(t){var i,r,u;if(typeof t!="number")throw"'number' is not a number";var f=1e4,e=1e6,o=1e9;return t==0?"0":t<f?n(t):(i="B+",r=9,t<e?(i="K+",r=3):t<o&&(i="M+",r=6),u=t.toString(),u.substring(0,u.length-r)+i)};return{abbreviatedFormat:t,commas:n}}());

;// PrivateServers/PrivateServer.js
var Roblox=Roblox||{};Roblox.PrivateServer=function(){var s=".tab-server-only .rbx-vip-server-item-container",d="#rbx-vip-servers .rbx-vip-server-template",r=Roblox.Endpoints.getAbsoluteUrl("/images/transparent.gif"),h=0,tt=$("#rbx-vip-servers").attr("data-slow-game-fps-threshold"),t=$(".rbx-vip-server-create"),ut=t.data("expected-price"),c=$("#rbx-vip-servers").attr("data-instance-list-url"),e=($("#rbx-vip-servers").attr("data-is-user-authenticated")||"").toLowerCase()==="true",it=$("#rbx-vip-servers").attr("data-renew-url"),f,n=$(s),o={Active:1,Inactive:2,Canceled:3},g={UserInitiated:1,InsufficientFunds:2,DisallowedByGameDeveloper:3},u=!1;$(document).ready(function(){Roblox.PrivateServer.initCreateVipServerBtn()});$(".rbx-tab a[href='#game-instances']").on("shown.bs.tab",function(){Roblox.PrivateServer.initServerTab()});var k=function(){if(Roblox.PrivateServer.canInit()!==!1){n.on("click",".rbx-vip-server-configure",function(n){n.preventDefault();var t=$(n.target).parents(".rbx-vip-server-item").attr("data-server-id"),i=$("#rbx-vip-servers").attr("data-configure-base-url"),r=i.format(t);window.location.href=r});n.on("click",".rbx-vip-server-shutdown",function(n){n.preventDefault();var t=$("#rbx-vip-servers").attr("data-placeid"),i=$(n.target).parents(".rbx-vip-server-item").attr("data-gameinstance-id"),r=$(n.target).parents(".rbx-vip-server-item").attr("data-server-id");Roblox.GameInstance.shutdownInstance(t,i,r),$(this).parents(".rbx-vip-server-menu").find(".rbx-menu-item").popover("hide")});$(".rbx-vip-servers-footer").on("click",".rbx-vip-servers-load-more",function(n){n.preventDefault();var r=$("#rbx-vip-servers").attr("data-universeid"),t=$(s),u=t.attr("data-current-page"),f=t.attr("data-total-pages"),i=u+1;i<=f&&Roblox.PrivateServer.fetchServers(r,i)});Roblox.PrivateServer.fetchFirstServers()}},b=function(){t.on("click",function(n){n.preventDefault();var i;try{i=$("#private-server-purchase-body-content").html(),t.attr("data-purchase-body-content",i),$("#ItemPurchaseAjaxData").attr("data-footer-text",t.attr("data-footer-text")),Roblox.PrivateServer.privateServerPurchaseItem.openPurchaseVerificationView("#rbx-vip-servers .rbx-vip-server-create"),f=$(".modal-body .private-server-name"),$(".modal-body .modal-top-body").addClass("private-server-purchase-modal")}catch(n){}})},rt=function(){return h>0?!1:(h++,e)},w=function(){n.empty()},p=function(t,i){c&&e&&(i=i==undefined||i<1?1:i,$.ajax({type:"GET",url:c,data:{universeId:t,page:i},cache:!1,contentType:"application/json; charset=utf-8",success:function(t){var f=t.Instances,i=$("<div></div>"),r=t.CurrentPage,e=t.TotalPages,o=$(".rbx-vip-servers-load-more"),s,h,c;n.attr("data-current-page",r),n.attr("data-total-pages",e),$.each(f,function(n,t){i.append(v(t))}),r===1?n.html(i.html()):n.append(i.html()),h=c=function(){u=!1;var n=$(".rbx-vip-server-create").attr("data-continueshopping-url");n&&(document.location.href=n)},s=function(n){u||(u=!0,$.ajax({type:"POST",url:it,data:{__RequestVerificationToken:$("[name=__RequestVerificationToken]").val(),privateServerId:n,expectedPrice:ut},success:h,error:c}))};n.find(".rbx-vip-server-renew").on("click",function(n){var t=$(n.target).parents(".rbx-vip-server-item").attr("data-server-id");n.preventDefault(),Roblox.Dialog.open({titleText:Roblox.PrivateServers.RenewRecurringTitle,bodyContent:Roblox.PrivateServers.RenewRecurringBody,acceptText:Roblox.PrivateServers.RenewRecurringAcceptText,acceptColor:Roblox.Dialog.green,onAccept:function(){s(t)},declineText:Roblox.PrivateServers.RenewRecurringDeclineText,allowHtmlContentInBody:!0,dismissable:!0})});f.length===0&&n.append($("<p class='section-content-off'> No VIP Server Instances Found. </p>")),r<e?o.removeClass("hidden"):o.addClass("hidden"),Roblox.PrivateServer.populateAvatarImages(),Roblox.PrivateServer.bindPopovers()},error:function(){n.find(".loading").remove().append("<p class='empty-server-list'>Sorry, something went wrong loading places.</p>")}}))},y=function(){var n=$("#rbx-vip-servers").attr("data-universeid");Roblox.PrivateServer.fetchServers(n,1)},v=function(n){var t=$(d).clone(),nt=n.PlaceCapacity,f=[];n.GameInstance!=null&&(f=n.GameInstance.PlayerIds);var w=f.length,u=Math.floor(Math.random()*1e6),v='<a class="rbx-menu-item" data-toggle="popover-dynamic" data-bind="game-vip-server-context-menu-'+u+'" data-original-title="" title="" data-viewport=".rbx-vip-server-item" ><span class="icon-more"></span></a><div class="rbx-popover-content" data-toggle="game-vip-server-context-menu-'+u+'"><ul class="dropdown-menu" role="menu"><li><a href="#" class="rbx-vip-server-configure">Configure</a></li><li><a href="#" class="rbx-vip-server-shutdown rbx-vip-server-shutdown">Shut Down This Server</a></li></ul>',a=n.Name,l=n.PrivateServer.OwnerUserId,c=n.PrivateServerOwnerName,s=n.PrivateServer.StatusType===o.Canceled&&n.MostRecentPrivateServerStatusChangeReasonType===g.InsufficientFunds,y=n.PrivateServer.StatusType===o.Inactive;t.find(".rbx-vip-server-item .font-bold").text(a),t.find(".rbx-vip-server-status").text(w+" of "+nt+" Players Max"),t.find(".rbx-vip-server-join").attr("data-placeid",n.PlaceId),t.find(".rbx-vip-server-item").attr("data-universeid",n.PrivateServer.UniverseId).attr("data-does-belong-to-user",n.DoesBelongToUser).attr("data-server-id",n.PrivateServer.Id).attr("data-is-cancelled-insufficient-funds",s),n.GameInstance&&t.find(".rbx-vip-server-item").attr("data-gameinstance-id",n.GameInstance.Id),n.UserCanConfigure&&n.UserCanShutdown&&t.find(".rbx-vip-server-menu").html(v),t.find(".rbx-menu-item").attr("data-bind","game-vip-server-context-menu-"+u),t.find(".rbx-popover-content").attr("data-toggle","game-vip-server-context-menu-"+u),n.PrivateServer&&n.PrivateServer.StatusType!==1?t.find(".rbx-vip-server-join").hide():t.find(".rbx-vip-server-join").attr("onclick",n.JoinScript);var p="data-retry-url='/avatar-thumbnail/json?userId="+l+"&width=100&height=100&format=PNG'",e=Roblox.PrivateServers.UserProfileAbsoluteUrlPattern.replace("/users/0/profile","/users/"+l+"/profile"),b="<a class='avatar avatar-card-fullbody owner-avatar' href='"+Roblox.Endpoints.getAbsoluteUrl(e)+"' "+p+" title='"+c+"'><img class='avatar-card-image' src='"+r+"'></a>",k="<a href='"+Roblox.Endpoints.getAbsoluteUrl(e)+"' class='text-name'>"+c+"</a>";t.find(".rbx-vip-owner").html(b+k),n.GamesInstance!=null&&n.GamesInstance.Fps>tt?t.find(".rbx-vip-server-alert").addClass("hidden"):n.GamesInstance==null&&t.find(".rbx-vip-server-alert").addClass("hidden"),(!n.DoesBelongToUser||n.IsPrivateServerSubscriptionActive)&&t.find(".rbx-vip-server-subscription-alert").addClass("hidden"),n.CanRenew||t.find(".rbx-vip-server-renew").addClass("hidden"),s&&n.DoesBelongToUser?t.find(".rbx-vip-server-item").addClass("rbx-vip-server-cancelled-insufficient-funds"):t.find(".rbx-vip-server-insufficient-funds").addClass("hidden"),y&&n.DoesBelongToUser?t.find(".rbx-vip-server-item").addClass("rbx-vip-server-inactive"):t.find(".rbx-vip-server-inactive").addClass("hidden");var i="",h=$("#rbx-vip-servers").data("avatar-headshot-enabled"),it=h?"headshot-thumbnail":"avatar-thumbnail";return $.each(f,function(n,t){var u="data-retry-url='/"+it+"/json?userId="+t+"&width=48&height=48&format=PNG'";i+=t>0?h?"<span class='avatar avatar-headshot-sm player-avatar'><a class='avatar-card-link' href='"+Roblox.Endpoints.getAbsoluteUrl("/users/"+t+"/profile")+"' "+u+" ><img class='avatar-card-image' src='"+r+"'></a></span>":"<span class='player-avatar'><a href='"+Roblox.Endpoints.getAbsoluteUrl("/users/"+t+"/profile")+"' "+u+" ><img src='"+r+"'></a></span>":"<span class='avatar avatar-headshot-sm player-avatar'><a class='avatar-card-link' "+u+" ><img class='avatar-card-image' src='"+r+"'></a></span>"}),t.find(".rbx-vip-server-players").html(i),t=t.html()},a=function(){$("#rbx-vip-servers .player-avatar a").loadRobloxThumbnails(),$("#rbx-vip-servers .owner-avatar").loadRobloxThumbnails()},l=function(){$('#rbx-vip-servers [data-toggle="popover-dynamic"]').popover({html:!0,placement:"bottom",content:function(){var n=$(this).attr("data-bind");return $('[data-toggle="'+n+'"]').html()}})},nt=function(n){$(".modal-body .private-server-name-input .form-group").addClass("form-has-error form-has-feedback"),$(".modal-body .private-server-name-error-message").text(n).show()},i=Roblox.ItemPurchase(function(){},function(n){var o,r,u,s,e,h;return(u=$("#rbx-vip-servers"),r=f.val(),e=u.attr("data-private-server-name-max-length"),h=u.attr("data-private-server-name-error-text"),r.trim().length<1||r.length>e)?(nt(h.format(e)),!1):(o=t.attr("data-purchase-url"),s={__RequestVerificationToken:$("[name=__RequestVerificationToken]").val(),universeId:t.attr("data-universe-id"),privateServerName:r,productId:n.productId,expectedCurrency:n.expectedCurrency,expectedPrice:n.expectedPrice,expectedSellerId:n.expectedSellerId},$.ajax({type:"POST",url:o,data:s,success:function(n){var t;Roblox.Dialog.toggleProcessing(!0,"PurchaseVerificationView"),"statusCode"in n&&n.statusCode!==200?i.openErrorView(n):("status"in n||(n={status:"error",showDivID:"TransactionFailureView",title:"Transaction Failed",errorMsg:"Transaction encountered an unexpected error."}),n.status==="success"?(t=$("#rbx-vip-servers").attr("data-configure-base-url").format(n.PrivateServerId),$("#ItemPurchaseAjaxData").attr("data-continueshopping-url",t),i.openPurchaseConfirmationView(n)):i.openErrorView(n))},error:function(n){var t=$.parseJSON(n.responseText);i.openErrorView(t)}}),!1)});return{initServerTab:k,canInit:rt,initCreateVipServerBtn:b,fetchServers:p,fetchFirstServers:y,populateAvatarImages:a,bindPopovers:l,clearInstances:w,privateServerPurchaseItem:i}}();

;// StringTruncator.js
function InitStringTruncator(){isInitialized||(fitStringSpan=document.createElement("span"),fitStringSpan.style.display="inline-block",fitStringSpan.style.visibility="hidden",fitStringSpan.style.height="0px",fitStringSpan.style.padding="0px",document.body.appendChild(fitStringSpan),isInitialized=!0)}function fitStringToWidth(n,t,i){function o(n){return n.replace("<","&lt;").replace(">","&gt;")}var u,r,f,e,s;if(isInitialized||InitStringTruncator(),i&&(fitStringSpan.className=i),u=o(n),fitStringSpan.innerHTML=u,fitStringSpan.offsetWidth>t){for(r=0,e=n.length;s=e-r>>1;)f=r+s,fitStringSpan.innerHTML=o(n.substring(0,f))+"&hellip;",fitStringSpan.offsetWidth>t?e=f:r=f;u=n.substring(0,r)+"&hellip;"}return u}function fitStringToWidthSafe(n,t,i){var r=fitStringToWidth(n,t,i),u;return r.indexOf("&hellip;")!=-1&&(u=r.lastIndexOf(" "),u!=-1&&u+10<=r.length&&(r=r.substring(0,u+2)+"&hellip;")),r}function fitStringToWidthSafeText(n,t,i){return fitStringToWidthSafe(n,t,i).replace("&hellip;","...")}var isInitialized=!1,fitStringSpan=null;

;// GameItemCard.js
var Roblox=Roblox||{};$(function(){var n=$("[data-voting-processed=false]");n.each(function(n,t){var i=$(t),r=i.find(".vote-container"),u=parseInt(r.attr("data-upvotes")),f=parseInt(r.attr("data-downvotes"));Roblox.Voting.UpdateVoteBar(u,f,i),i.attr("data-voting-processed",!0)})});

;// Comments.js
var Roblox=Roblox||{};Roblox.Comments=function(){var c=!1,f=Roblox&&Roblox.Endpoints?Roblox.Endpoints.getAbsoluteUrl("/"):"/",nt=Roblox&&Roblox.Endpoints?Roblox.Endpoints.getAbsoluteUrl("/comments/post"):"/comments/post",g=Roblox&&Roblox.Endpoints?Roblox.Endpoints.getAbsoluteUrl("/comments/delete"):"/comments/delete",n=$("#AjaxCommentsContainer"),o=$(".comment-form"),r=n.find(".rbx-comment-error"),e=n.find(".rbx-comment-count"),u=o.find(".rbx-post-comment"),t=o.find(".rbx-comment-input"),d=function(){i(r,"",!0,!0),w(),s(),f=n.data("signin-url")},w=function(){u.click(function(){var i=t.val();if(i.trim()!=""){if(n.attr("data-is-user-authenticated").toLowerCase()=="false"){Roblox.Dialog.open({titleText:"Login to Comment",bodyContent:"<div>You must login to comment.</div> <div>Please <a href='"+f+"'>login or register</a> to continue.</div>",onAccept:function(){window.location.href=f},acceptText:"Login",declineText:"Cancel",allowHtmlContentInBody:!0});return}if(Roblox.Comments.FilterIsEnabled&&a(i)){Roblox.GenericModal.open(Roblox.Comments.Resources.linksNotAllowedTitle,"/images/Icons/img-alert.png",Roblox.Comments.Resources.linksNotAllowedMessage);return}Roblox.Comments.makeComment()}});t.on({focus:function(){$(this).removeClass("blur")},blur:function(){$(this).addClass("blur")}});t.on("input propertychange",function(){var f=t[0],u=Roblox.Comments.Limits,e,n;for(i(r,"",!0,!0),e=!1,n=0;n<u.length;++n)l(f.value,u[n].limit,u[n].character)||(f.value=k(f.value,u[n].limit,u[n].character),i(r,u[n].message,!1),e=!0),e||typeof u[n].character!="undefined"||v(f.value,u[n].limit)});$(".comments").on("click",".rbx-comment-remove",function(){elem=$(this),Roblox.Comments.deleteComment(elem.attr("data-comment-id")),elem.parents(".comment-item").remove()});$(".rbx-comments-see-more").on("click",function(){var n=$(".comments .comment-item").length;Roblox.Comments.getComments(n)});$(window).on("scroll resize",function(){Roblox.Comments.loadCommentsIfReady()})},s=function(){Roblox.Comments&&!Roblox.Comments.gotFirstComments&&Roblox.Comments.isCommentBlockInViewport()&&(Roblox.Comments.getComments(0),Roblox.Comments.gotFirstComments=!0)},b=function(){var r=$(window),t=r.scrollTop(),u=t+r.height(),i=n.offset().top,f=i+n.height();return i>=t&&i<=u||f>=t&&f<=u},h=function(n,t){var i=$(".comments-item-template").clone(),r;return t&&(i.find(".comment-controls .rbx-comment-report-link").remove(),i.find(".comment-controls").append("<a class='rbx-comment-remove' data-comment-id='"+n.Id+"' title='Remove Comment'><span class='icon-remove'></span></a>")),r=Roblox&&Roblox.Endpoints?Roblox.Endpoints.getAbsoluteUrl("/users/"+n.AuthorId+"/profile"):"/users/"+n.AuthorId+"/profile",i.find(".comment-item").attr("data-comment-id",n.Id),i.find(".comment-user .Avatar a").attr("title",n.AuthorName).attr(r),i.find(".comment-body .text-name").text(n.AuthorName).attr("href",r),i.find(".comment-user .Avatar").addClass("roblox-avatar-image").attr("data-user-id",n.AuthorId).html(""),i.find(".comment-body span.xsmall").text(n.PostedDate),i.find(".comment-content").html(n.Text.replace(/\$/g,"&#36;")),i.find(),i=i.html(),i=i.replace("%CommentID",n.Id),i=i.replace("%PageURL",encodeURIComponent(window.location.href))},tt=function(){u.attr("disabled",!0),$.post(nt,{assetId:n.attr("data-asset-id"),text:t.val()},function(n){var f,u;typeof n.Id!="undefined"?(f={Id:n.Id,PostedDate:n.PostedDate,Text:n.Text,AuthorName:n.AuthorName,AuthorId:n.AuthorId,AuthorThumbnail:{Url:""}},t.val(""),e.html(""),i(r,"",!0,!0),u=$(".comments"),u.find(".empty").remove(),u.prepend(h(f,!1)),Roblox.require("Widgets.AvatarImage",function(n){n.populate()})):p(n.error)}).always(function(){u.removeAttr("disabled")})},p=function(n){n=="01"?Roblox.Dialog.open({titleText:Roblox.Comments.Resources.emailVerifiedABTitle,bodyContent:Roblox.Comments.Resources.emailVerifiedABMessage,onAccept:function(){var n=Roblox&&Roblox.Endpoints?Roblox.Endpoints.getAbsoluteUrl("/my/account?confirmemail=1"):"/my/account?confirmemail=1";window.location.href=n},acceptText:Roblox.Comments.Resources.accept,declineText:Roblox.Comments.Resources.decline,allowHtmlContentInBody:!0}):i(r,n,!1,!0)},y=function(t){var r,i;t=t==undefined?0:t,r=n.attr("data-asset-id"),i=$(".comments"),i.find(".empty,.more").remove(),i.append($('<div class="loading"></div>'));var u=Math.floor(Math.random()*9001),f=100,e=100,o="PNG";$.ajax({type:"GET",url:"/comments/get-json",data:{assetId:r,startindex:t,thumbnailWidth:f,thumbnailHeight:e,thumbnailFormat:o,cachebuster:u},contentType:"application/json; charset=utf-8",success:function(n){var r=n.Comments,e=n.MaxRows,u=$(".rbx-comments-see-more"),f;i.find(".loading,.empty,.more").remove();for(f in r)i.append(h(r[f],n.IsUserModerator));!r||r.length<e?u.addClass("hidden"):u.removeClass("hidden"),r&&(r.length!=0||t!=0)||i.append($('<div class="empty">'+Roblox.Comments.Resources.noCommentsFound+"</div>")),Roblox.require("Widgets.AvatarImage",function(n){n.populate()})},error:function(){$(".comments").find(".loading,.empty,.more").remove().append($('<div class="empty">'+Roblox.Comments.Resources.sorrySomethingWentWrong+"</div>"))}})},v=function(n,t){e.html(Math.max(0,Math.min(t,t-n.length))+Roblox.Comments.Resources.charactersRemaining)},a=function(n){return new RegExp(Roblox.Comments.FilterRegex).test(n.replace(/(\r\n|\n|\r|<br\/>)/gm,""))?!0:!1},i=function(n,t,i,r){r=typeof r=="undefined"?!1:r,i=typeof i=="undefined"?!0:i,r&&n.empty(),n.append(t+" "),i?(n.hide(),u.removeAttr("disabled")):(n.show(),e.html(""),u.attr("disabled",!0))},l=function(n,t,i){if(i=typeof i=="undefined"?"":i,i!==""){var r=n.split(i).length-1;return r<=t}return n.length<=t},k=function(n,t,i){if(i=typeof i=="undefined"?"":i,i!==""){var f=n.split(i),e=f.length,u="",r;if(e>t)for(r=0;r<e;++r)u+=f[r],r<t&&(u+=i);n=u}else n=n.substr(0,t);return n},it=function(n){$.post(g,{commentId:n},function(){$(".comments [data-comment-id="+n+"]").parents(".comment-item")})};return{initialize:d,getComments:y,makeComment:tt,deleteComment:it,gotFirstComments:c,isCommentBlockInViewport:b,loadCommentsIfReady:s}}();

;// GameInstances/GameInstance.js
var Roblox=Roblox||{};Roblox.GameInstance=function(){var t="#rbx-running-games .rbx-game-server-item-container",u="#rbx-running-games .rbx-game-server-template",r=0,n=$(t);$(".rbx-tab a[href='#game-instances']").on("shown.bs.tab",function(){Roblox.GameInstance.init()});var f=function(){if(!(r>0)){r+=1,Roblox.GameInstance.fetchFirstServers();$(".rbx-running-games-refresh").on("click",function(){Roblox.GameInstance.fetchFirstServers(),Roblox.PrivateServer&&Roblox.PrivateServer.fetchFirstServers()});$("body").on("click",function(n){$('[data-toggle="popover-dynamic"]').each(function(){$(this).is(n.target)||$(this).has(n.target).length!==0||$(this).siblings(".popover").has(n.target).length!==0||$(this).popover("hide")})});n.on("click",".rbx-game-server-shutdown",function(n){n.preventDefault();var t=$("#rbx-running-games").attr("data-showshutdown"),i=$("#rbx-running-games").attr("data-placeid"),r=$(n.target).parents(".rbx-game-server-item").attr("data-gameid");t&&Roblox.GameInstance.shutdownInstance(i,r),$(this).parents(".rbx-game-server-menu").find(".rbx-menu-item").popover("hide")});$(".rbx-running-games-load-more").on("click",function(){var n=$(t+" .rbx-game-server-item").length,i=$("#rbx-running-games").attr("data-placeId");Roblox.GameInstance.fetchServers(i,n)})}},e=function(n,t){var r=$(u).clone(),l=n.Capacity,h=n.CurrentPlayers,a=h.length,v='<a class="rbx-menu-item" data-toggle="popover-dynamic" data-bind="game-server-context-menu-'+e+'" data-original-title="" title="" data-viewport=".rbx-game-server-item" ><i class="icon-more"></i></a><div class="rbx-popover-content" data-toggle="game-server-context-menu-'+e+'"><ul class="dropdown-menu" role="menu"><!--<li><a href="#">Configure</a></li>--><li><a href="#" class="rbx-game-server-shutdown">Shut Down This Server</a></li></ul>',e=Math.floor(Math.random()*1e6);r.find(".rbx-game-server-title").html("&nbsp;"),r.find(".rbx-game-server-status").text(a+" of "+l+" Players Max"),r.find(".rbx-game-server-join").attr("data-placeid",n.PlaceId),r.find(".rbx-game-server-item").attr("data-gameid",n.Guid).attr("data-show-shutdown-all",n.ShowShutdownAllButton),t&&r.find(".rbx-game-server-menu").html(v),r.find(".rbx-menu-item").attr("data-bind","game-server-context-menu-"+e),r.find(".rbx-popover-content").attr("data-toggle","game-server-context-menu-"+e),r.find(".rbx-game-server-join").attr("onclick",n.JoinScript),n.ShowSlowGameMessage||r.find(".rbx-game-server-alert").addClass("hidden");var o="",c=$("#rbx-running-games").data("avatar-headshot-enabled"),y=c?"headshot-thumbnail":"avatar-thumbnail";for(i in h){var f=h[i],p=f.Thumbnail.IsFinal,s="";p||(s="data-retry-url='/"+y+"/json?userId="+f.Id+"&width=48&height=48&format=PNG'"),o+=f.Id>0?c?"<span class='avatar avatar-headshot-sm player-avatar'><a class='avatar-card-link' href='"+Roblox.Endpoints.getAbsoluteUrl("/users/"+f.Id+"/profile")+"' "+s+" title='"+f.Username+"'><img class='avatar-card-image' src='"+f.Thumbnail.Url+"'></a></span>":"<span class='player-avatar'><a href='"+Roblox.Endpoints.getAbsoluteUrl("/users/"+f.Id+"/profile")+"' "+s+" title='"+f.Username+"'><img src='"+f.Thumbnail.Url+"'></a></span>":"<span class='avatar avatar-headshot-sm player-avatar'><a class='avatar-card-link' "+s+" title='"+f.Username+"'><img class='avatar-card-image' src='"+f.Thumbnail.Url+"'></a></span>"}return r.find(".rbx-game-server-players").html(o),r=r.html()},o=function(){$("#rbx-running-games .player-avatar a").loadRobloxThumbnails()},s=function(){$('#rbx-running-games [data-toggle="popover-dynamic"]').popover({html:!0,placement:"bottom",content:function(){var n=$(this).attr("data-bind");return $('[data-toggle="'+n+'"]').html()}})},h=function(){n.empty()},c=function(n,t,i){var r={__RequestVerificationToken:$("[name=__RequestVerificationToken]").val(),placeId:n,gameId:t};typeof i!="undefined"&&(r.privateServerId=i),$.ajax({type:"POST",url:"/game-instances/shutdown",data:r,success:function(){},error:function(){}})},l=function(i,r){r=r==undefined?0:r,$.ajax({type:"GET",url:"/games/getgameinstancesjson",data:{placeId:i,startindex:r},cache:!1,contentType:"application/json; charset=utf-8",success:function(i){var f=i.Collection,o=i.ShowShutdownAllButton,u,s;$("#rbx-running-games").attr("data-showshutdown",o),u=$("<div></div>");for(s in f)u.append(e(f[s],o));r==0?n.html(u.html()):n.append(u.html()),f.length==0?(n.addClass("section-content-off"),n.append($("<p> No Servers Found. </p>"))):n.removeClass("section-content-off");var c=$(t+" .rbx-game-server-item").length,l=i.Collection.length,a=i.TotalCollectionSize,h=$(".rbx-running-games-load-more");l>0&&c<a?h.removeClass("hidden"):h.addClass("hidden"),Roblox.GameInstance.populateAvatarImages(".player-avatar a"),Roblox.GameInstance.bindPopovers()},error:function(){n.find(".loading").remove().append("<div class='empty'>Sorry, something went wrong loading places.</div>")}})},a=function(){var n=$("#rbx-running-games").attr("data-placeid");Roblox.GameInstance.fetchServers(n,0)};return{init:f,fetchServers:l,fetchFirstServers:a,populateAvatarImages:o,bindPopovers:s,clearInstances:h,shutdownInstance:c}}();

;// GenericModal.js
typeof Roblox.GenericModal=="undefined"&&(Roblox.GenericModal=function(){function s(u,f,e,s,h,c){var l,a;t.isOpen=!0,n=$.extend({},n,c),i=s,l=$("div.GenericModal").filter(":first"),l.find("div.Title").text(u),f===null?l.addClass("noImage"):(l.find("img.GenericModalImage").attr("src",f),l.removeClass("noImage")),l.find("div.Message").html(e),h&&(l.removeClass("smallModal"),l.addClass("largeModal")),a=l.find(o),a.attr("class","btn-large "+n.acceptColor),a.unbind(),a.bind("click",function(){r()}),l.modal(n)}function r(){t.isOpen=!1,$.modal.close(),typeof i=="function"&&i()}var f="btn-primary",u="btn-neutral",e="btn-negative",o=".ImageButton.btn-neutral.btn-large.roblox-ok",t={isOpen:!1},n={overlayClose:!0,escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},acceptColor:u},i;return $(function(){$(document).on("click",".GenericModal .roblox-ok",function(){r()})}),{close:r,open:s,status:t,green:f,blue:u,gray:e}}()),Roblox.GenericModal.Resources={ErrorText:"Error",ErrorMessage:"Sorry, an error occurred."},$(document).keypress(function(n){n.which===13&&Roblox.GenericModal.status.isOpen&&Roblox.GenericModal.close()});

;// utilities/popover.js
var Roblox=Roblox||{};Roblox.Popover=function(){"use strict";function r(t,r){var u=$(t),f=$(r),e=$(n),h=e.outerWidth(),c=u.find(i).outerWidth(),l=e.offset().left,o=0,s;(u.hasClass("bottom")||u.hasClass("top"))&&(s=$("body").outerWidth()-parseInt(f.width()+f.offset().left),o=$("body").outerWidth()-l-s-h/2-c/2,u.find(i).css("right",o))}function f(){$(n).on("click touchstart",function(n){var e=$(this).data("bind"),o=e?"#"+e:t,i=$(o),s=$(this).data("container"),h=s?"#"+s:u,f;i.hasClass("manual")||i.toggleClass("hidden"),f=!i.hasClass("hidden"),$(document).triggerHandler("Roblox.Popover.Status",{isOpen:f,eventType:n.type}),f&&r(o,h)})}function e(){$("body").on("click touchstart",function(i){$(n).each(function(){var r=$(this).data("bind"),n=r?$("#"+r):$(t);$(this).is(i.target)||$(this).has(i.target).length!==0||n.has(i.target).length!==0||n.hasClass("hidden")||i.type!=="click"||(n.addClass("hidden"),$(document).triggerHandler("Roblox.Popover.Status",{isHidden:!0,eventType:i.type}))})})}function o(){f(),e()}var n=".roblox-popover",t=".roblox-popover-content",u=".roblox-popover-container",i=".arrow";return $(function(){o()}),{setUpTrianglePosition:r}}();

;// GenericConfirmation.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.GenericConfirmation=="undefined"&&(Roblox.GenericConfirmation=function(){function w(){n.isOpen=!1,t()}function k(t){var a,e,o,s,l;n.isOpen=!0,a={titleText:"",bodyContent:"",footerText:"",acceptText:Roblox.Resources.GenericConfirmation.yes,declineText:Roblox.Resources.GenericConfirmation.No,acceptColor:u,declineColor:f,xToCancel:!1,onAccept:function(){return!1},onDecline:function(){return!1},onCancel:function(){return!1},imageUrl:null,allowHtmlContentInBody:!1,allowHtmlContentInFooter:!1,dismissable:!0,fieldValidationRequired:!1,onOpenCallback:function(){}},t=$.extend({},a,t),c.overlayClose=t.dismissable,c.escClose=t.dismissable,e=$(i),e.html(t.acceptText),e.attr("class","btn-large "+t.acceptColor),e.unbind(),e.bind("click",function(){return v(e)?!1:(t.fieldValidationRequired?nt(t.onAccept):h(t.onAccept),!1)}),o=$(r),o.html(t.declineText),o.attr("class","btn-large "+t.declineColor),o.unbind(),o.bind("click",function(){return v(o)?!1:(h(t.onDecline),!1)}),$('[data-modal-handle="confirmation"] div.Title').text(t.titleText),s=$("[data-modal-handle='confirmation']"),t.imageUrl==null?s.addClass("noImage"):(s.find("img.GenericModalImage").attr("src",t.imageUrl),s.removeClass("noImage")),t.allowHtmlContentInBody?$("[data-modal-handle='confirmation'] div.Message").html(t.bodyContent):$("[data-modal-handle='confirmation'] div.Message").text(t.bodyContent),$.trim(t.footerText)==""?$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').hide():$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').show(),t.allowHtmlContentInFooter?$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').html(t.footerText):$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').text(t.footerText),$("[data-modal-handle='confirmation']").modal(c),l=$("a.genericmodal-close"),l.unbind(),l.bind("click",function(){return h(t.onCancel),!1}),t.xToCancel||l.hide(),t.onOpenCallback()}function a(n){n.hasClass(f)?n.addClass(s):n.hasClass(l)?n.addClass(e):n.hasClass(u)&&n.addClass(o)}function v(n){return n.hasClass(o)||n.hasClass(s)||n.hasClass(e)?!0:!1}function b(){var n=$(i),t=$(r);a(n),a(t)}function g(){var u=$(i),t=$(r),n=o+" "+s+" "+e;u.removeClass(n),t.removeClass(n)}function p(){if(n.isOpen){var t=$(i);t.click()}}function y(){var n=$(r);n.click()}function t(t){n.isOpen=!1,typeof t!="undefined"?$.modal.close(t):$.modal.close()}function h(n){t(),typeof n=="function"&&n()}function nt(n){if(typeof n=="function"){var i=n();if(i!=="undefined"&&i==!1)return!1}t()}var l="btn-primary",u="btn-neutral",f="btn-negative",e="btn-disabled-primary",o="btn-disabled-neutral",s="btn-disabled-negative",d="btn-none",i="#roblox-confirm-btn",r="#roblox-decline-btn",n={isOpen:!1},c={overlayClose:!0,escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:w};return{open:k,close:t,disableButtons:b,enableButtons:g,clickYes:p,clickNo:y,status:n,green:l,blue:u,gray:f,none:d}}()),$(document).keypress(function(n){Roblox.GenericConfirmation.status.isOpen&&n.which===13&&Roblox.GenericConfirmation.clickYes()});
